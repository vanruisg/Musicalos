{% extends "layout.html" %}

{% block styles %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css" />
{% endblock %}

{% block title %}Home{% endblock %}

{% block content %}
    <div class="container">
        <div class="jumbotron img-background" style="background-image:url(https://www.udiscovermusic.com/wp-content/uploads/2019/04/best-jazz-songs.jpg); background-size:cover">
            <h2 class="display-4" id="band" style="color:gold; font-weight:bold; text-shadow: -1px 0 black, 0 2px black, 2px 0 black, 0 -1px black">Buy Tickets to Concerts in New Orleans</h2>
            <h3 class="lead" style="color:gold; font-weight:bold; text-shadow: -1px 0 black, 0 2px black, 2px 0 black, 0 -1px black">Simply pick a date, find out what concerts are happening in the city, and click to place an order</h3>
        </div>
        <div class="container">
            <div class="row">
                <br />
                <h3>Select a Date</h3>
                <!-- Form code begins -->
                <form id="selectDate"> 
                    <div class="form-group" style="max-width:20%">
                        <!-- Date input -->
                        <input class="form-control" id="dateInput" name="date" placeholder="YYYY/MM/DD" type="text" />
                    </div>
                </form>
                    <table class="table" style="width:70%">
                        <thead>
                            <tr>
                                <th scope="col">Concert Name</th>
                                <th scope="col">Time</th>
                                <th scope="col">Cost</th>
                                <th scope="col">Select</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for row in rows %}
                            <tr>
                                <th scope="row">{{row[0]}}</th>
                                <td>{{row[1]}}</td>
                                <td>{{row[2]}}</td>
                                <td><input type="checkbox" class="custom-control-input" id="defaultUnchecked"><td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <div class="form-group">
                        <!-- Submit button -->
                        <input id="buy_tickets" type="button" class="btn btn-success" style="margin-top:15px; margin-bottom:10px;" value="Buy Tickets" onclick="window.location ='/add_tickets'"/>
                    </div>
                <!-- Form code ends -->
                <div id="errorAlert" class="alert alert-warning" role="alert" style="display:none;">There are no concerts happening on the selected date. Select a new date and try again.</div>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
    <!--<script>
        $(document).ready(function() {

        $('form').on('submit', function(event) {

                $.ajax({
                    data : {
                        concertDate : $('#dateInput').val()
                    },
                    type : 'POST',
                    url : '/process'
                    })
                    .done(function(data) {

                        if (data.error) {
                            $('#errorAlert').text(data.error).show();
                            $('#concert_results').hide();
                            $('#buy_tickets').hide();
                        }
                        else {
                            $('#concert_results').html(response);
                            $('#buy_tickets').show();
                        }

                });      

                event.preventDefault();

            });
        });
    </script> -->
    <script>
        $(document).ready(function () {
            var date_input = $('input[name="date"]'); 
            var container = $('.bootstrap-iso form').length > 0 ? $('.bootstrap-iso form').parent() : "body";
            var options = {
                format: 'yyyy/mm/dd',
                container: container,
                todayHighlight: true,
                autoclose: true,
            };
            date_input.datepicker(options);
        })
    </script>
{% endblock %}